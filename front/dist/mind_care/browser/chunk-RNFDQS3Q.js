import{h as s,ja as n,k as i,n as o}from"./chunk-GXFZJAPF.js";var a=class t{constructor(e){this.http=e}apiUrl="http://localhost:8081/api/users";storageKey="loggedUser";register(e){return this.http.post(`${this.apiUrl}/register`,e)}login(e){return this.http.post(`${this.apiUrl}/login`,e).pipe(s(r=>localStorage.setItem(this.storageKey,JSON.stringify(r))))}getLoggedUser(){let e=localStorage.getItem(this.storageKey);if(!e)return null;try{return JSON.parse(e)}catch{return localStorage.removeItem(this.storageKey),null}}getLoggedRole(){let e=this.getLoggedUser()?.role??"";return this.normalizeRole(e)}isAdmin(){return this.getLoggedRole()==="ADMIN"}logout(){localStorage.removeItem(this.storageKey)}normalizeRole(e){return(e??"").trim().toUpperCase().replace(/^ROLE_/,"")}static \u0275fac=function(r){return new(r||t)(o(n))};static \u0275prov=i({token:t,factory:t.\u0275fac,providedIn:"root"})};export{a};
